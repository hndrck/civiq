---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import { generateContourPattern } from '../utils/contourGenerator';
import { getCollection } from 'astro:content';

const caseStudies = (await getCollection('case-studies'))
  .filter(study => study.data.featured)
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 3);
---

<Layout title="Civiq Design — Your Partner in Public Good" description="Senior government service design expertise without the agency bloat. Brian Hendrick helps governments ship services that work—then leaves teams stronger.">
  <Navigation />

  <a href="#main-content" class="skip-link">Skip to main content</a>

  <main id="main-content" class="pt-16">
    <!-- Hero Section -->
    <section class="relative overflow-hidden" style="background: radial-gradient(ellipse 150% 100% at 50% 0%, #1a4f54 0%, var(--color-forest-green) 40%, #0a2527 100%); padding-top: 200px; padding-bottom: 160px;">
      <!-- Organic noise/grain texture -->
      <div class="absolute inset-0 pointer-events-none" style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 400 400%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 /%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.08%22/%3E%3C/svg%3E'); opacity: 0.35;"></div>

      <!-- Logo mark pattern - large watermark center-right (parallax) -->
      <div class="hero-parallax absolute inset-0 pointer-events-none" data-speed="0.15" style="background-image: url('/civiq-mark.svg'); background-size: 900px; background-position: 75% 50%; background-repeat: no-repeat; opacity: 0.06; mix-blend-mode: overlay; will-change: transform;"></div>

      <!-- Logo mark pattern - smaller top-left accent (parallax) -->
      <div class="hero-parallax absolute inset-0 pointer-events-none" data-speed="0.08" style="background-image: url('/civiq-mark.svg'); background-size: 300px; background-position: 10% 15%; background-repeat: no-repeat; opacity: 0.04; mix-blend-mode: soft-light; will-change: transform;"></div>

      <!-- Layered gradient overlays for depth -->
      <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(circle at 20% 30%, rgba(214, 118, 86, 0.08) 0%, transparent 40%);"></div>
      <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(circle at 80% 70%, rgba(217, 237, 181, 0.05) 0%, transparent 35%);"></div>

      <!-- Subtle vignette for focus -->
      <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(ellipse at center, transparent 30%, rgba(0,0,0,0.15) 100%);"></div>

      <!-- Top edge subtle glow -->
      <div class="absolute top-0 left-0 right-0 h-px pointer-events-none" style="background: linear-gradient(90deg, transparent 0%, rgba(217, 237, 181, 0.3) 50%, transparent 100%);"></div>

      <div class="relative content-max mx-auto px-6 sm:px-8 lg:px-12">
        <div style="max-width: 680px;">
          <!-- Headline -->
          <h1 class="hero-animate hero-animate-delay-1 text-display" style="color: var(--color-white); margin-bottom: 2rem;">
            Your partner in public good.
          </h1>

          <!-- Subhead -->
          <p class="hero-animate hero-animate-delay-2 text-intro" style="color: var(--color-white); opacity: 0.9; max-width: 560px; margin-bottom: 3rem;">
            Senior expertise without the agency bloat. I help governments ship what matters. Then I leave your team stronger than I found them.
          </p>

          <!-- CTAs -->
          <div class="hero-animate hero-animate-delay-3 flex flex-col sm:flex-row items-start sm:items-center gap-5">
            <a
              href="/contact"
              class="hero-cta-primary group inline-flex items-center gap-2 text-lg font-medium transition-colors"
              style="color: var(--color-warm-clay);"
            >
              <span>Partner with Brian</span>
              <span class="inline-block transition-transform group-hover:translate-x-1" aria-hidden="true">→</span>
            </a>
            <a
              href="#case-studies"
              class="hero-cta-secondary inline-flex items-center justify-center px-5 py-2.5 text-base font-regular transition-all rounded"
            >
              View Recent Work
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <section class="section-padding animate-fade-in-up" style="background-color: var(--color-white);">
      <div class="content-max mx-auto px-6 sm:px-8 lg:px-12">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16">
          <!-- Left column: Section header -->
          <div class="lg:col-span-4">
            <h2 class="text-h2 mb-4" style="color: var(--color-forest-green);">How I Work</h2>
            <p class="text-body" style="color: var(--color-forest-green); opacity: 0.7;">
              Whether I'm embedded with your team for months or brought in for a focused engagement, the approach stays the same: solve the immediate problem, build the muscle to handle the next ones.
            </p>
          </div>

          <!-- Right column: Services list -->
          <div class="lg:col-span-8">
            <div class="space-y-12">
              <!-- 01 Clarity from Complexity -->
              <article class="service-item">
                <div class="flex items-start gap-6">
                  <span class="service-number">01</span>
                  <div>
                    <h3 class="text-h3 mb-3" style="color: var(--color-forest-green);">Clarity from Complexity</h3>
                    <div class="mb-3 flex flex-wrap gap-2">
                      <span class="service-tag">Service Design</span>
                      <span class="service-tag">User Research</span>
                      <span class="service-tag">Systems Thinking</span>
                    </div>
                    <p class="text-body" style="color: var(--color-forest-green); opacity: 0.75; max-width: 520px;">
                      I map journeys, pain points, and policy constraints to give you an actionable blueprint. You get clarity on what's actually happening, not assumptions.
                    </p>
                  </div>
                </div>
              </article>

              <div class="service-divider"></div>

              <!-- 02 Strategy that Ships -->
              <article class="service-item">
                <div class="flex items-start gap-6">
                  <span class="service-number">02</span>
                  <div>
                    <h3 class="text-h3 mb-3" style="color: var(--color-forest-green);">Strategy that Ships</h3>
                    <div class="mb-3 flex flex-wrap gap-2">
                      <span class="service-tag">Digital Strategy</span>
                      <span class="service-tag">Product Roadmapping</span>
                      <span class="service-tag">Change Leadership</span>
                    </div>
                    <p class="text-body" style="color: var(--color-forest-green); opacity: 0.75; max-width: 520px;">
                      I help leadership make confident decisions about technology, delivery, and organizational change. Strategy you can execute, not documentation you'll never open again.
                    </p>
                  </div>
                </div>
              </article>

              <div class="service-divider"></div>

              <!-- 03 Capacity, Not Dependency -->
              <article class="service-item">
                <div class="flex items-start gap-6">
                  <span class="service-number">03</span>
                  <div>
                    <h3 class="text-h3 mb-3" style="color: var(--color-forest-green);">Capacity, Not Dependency</h3>
                    <div class="mb-3 flex flex-wrap gap-2">
                      <span class="service-tag">Program Delivery</span>
                      <span class="service-tag">Agile Coaching</span>
                      <span class="service-tag">Practice Development</span>
                    </div>
                    <p class="text-body" style="color: var(--color-forest-green); opacity: 0.75; max-width: 520px;">
                      I work alongside your team to ship while transferring skills in real-time. When I leave, you're stronger than I found you.
                    </p>
                  </div>
                </div>
              </article>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Case Studies Section -->
    <section id="case-studies" class="section-padding animate-fade-in-up" style="background-color: var(--color-rice-white);">
      <div class="content-max mx-auto px-6 sm:px-8 lg:px-12">
        <div class="mb-12 lg:mb-16">
          <h2 class="text-h2 mb-4" style="color: var(--color-forest-green);">Featured Work</h2>
          <p class="text-body" style="color: var(--color-forest-green); opacity: 0.7;">
            Recent projects delivering measurable impact
          </p>
        </div>

        <div class="featured-grid">
          {caseStudies.map((study) => {
            const pattern = generateContourPattern(study.slug, { width: 100, height: 100, levels: 1, complexity: 1 });
            return (
              <a
                href={`/case-studies/${study.slug}`}
                class="featured-card group"
              >
                <div class="accent-bar" style={`background: linear-gradient(135deg, ${pattern.colorScheme.primary}, ${pattern.colorScheme.secondary});`}></div>
                <div class="card-body">
                  <div class="text-label mb-3" style="color: var(--color-teal-blue);">{study.data.client}</div>
                  <h3 class="text-h3 mb-4" style="color: var(--color-forest-green);">
                    {study.data.title}
                  </h3>
                  <p class="text-body mb-6" style="color: var(--color-forest-green); opacity: 0.75;">
                    {study.data.summary}
                  </p>
                  <span class="card-cta">
                    Read case study
                    <svg class="arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                      <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
              </a>
            );
          })}
        </div>

        <div class="mt-12 lg:mt-16">
          <a
            href="/case-studies"
            class="group inline-flex items-center gap-3 text-base transition-all duration-200"
            style="color: var(--color-teal-blue); font-weight: var(--font-weight-medium);"
          >
            <span>View All Case Studies</span>
            <span class="inline-block transition-transform duration-200 group-hover:translate-x-1" aria-hidden="true">→</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Clients Section -->
    <section class="section-padding animate-fade-in-up" style="background-color: var(--color-white);">
      <div class="content-max mx-auto px-6 sm:px-8 lg:px-12">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16">
          <!-- Left column: Section header -->
          <div class="lg:col-span-4">
            <h2 class="text-h2 mb-4" style="color: var(--color-forest-green);">Who I've Worked With</h2>
            <p class="text-body" style="color: var(--color-forest-green); opacity: 0.7;">
              Governments and organizations I've helped ship and scale.
            </p>
          </div>

          <!-- Right column: Logos grid -->
          <div class="lg:col-span-8">
            <div class="client-logos-grid">
              <div class="client-logo">
                <img src="/AB_Logo.png" alt="Alberta Government" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/BC_Logo.svg" alt="British Columbia Government" width="187" height="55" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/CoB_Logo.png" alt="City of Boston" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/DB_Logo.png" alt="Daily Bread Food Bank" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/MoD_Logo.png" alt="March of Dimes Canada" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/ODI_Logo.svg" alt="California Office of Data and Innovation" width="119" height="44" loading="lazy" />
              </div>
              <div class="client-logo">
                <img src="/Yukon_Logo.png" alt="Yukon Government" loading="lazy" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="section-padding animate-fade-in-up" style="background-color: var(--color-rice-white);">
      <div class="content-max mx-auto px-6 sm:px-8 lg:px-12">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 lg:gap-20">
          <!-- Photo -->
          <div class="lg:col-span-2">
            <div class="sticky top-24">
              <div class="relative overflow-hidden rounded-lg">
                <img
                  src="/brian-hendrick.png"
                  alt="Brian Hendrick, Founder of Civiq Design"
                  class="w-full object-cover object-top"
                  style="aspect-ratio: 1/1;"
                  loading="lazy"
                />
              </div>
              <!-- Name and Title -->
              <div class="mt-6">
                <p class="text-h3 mb-1" style="color: var(--color-forest-green);">Brian Hendrick</p>
                <p class="text-body" style="color: var(--color-forest-green); opacity: 0.6;">Principal and Founder</p>
              </div>
            </div>
          </div>

          <!-- Content -->
          <div class="lg:col-span-3">
            <div class="space-y-8">
              <div>
                <h2 class="text-h1 mb-4 headline-balance" style="color: var(--color-forest-green);">Meet Brian.</h2>
              </div>

              <div class="space-y-5">
                <p class="text-body" style="color: var(--color-forest-green); opacity: 0.8;">
                  I spent my career inside government, leading service design and product teams at organizations including the Government Digital Service, Ministry of Justice, and Canadian Digital Service. I know the constraints from the inside: procurement cycles, risk aversion, political realities.
                </p>

                <p class="text-body" style="color: var(--color-forest-green); opacity: 0.8;">
                  I founded Civiq to broaden my impact. Working independently lets me partner across jurisdictions and levels of government, bringing senior expertise without the overhead of a large consultancy.
                </p>

                <p class="text-body" style="color: var(--color-forest-green); opacity: 0.8;">
                  On larger engagements, I partner with like-minded boutique firms who share my approach. Whether you're working with me directly or through a strategic partner, you get the same thing: a seasoned practitioner who builds your team's capacity, not dependency.
                </p>
              </div>

              <div class="pt-2 flex flex-col sm:flex-row items-start sm:items-center gap-5">
                <a
                  href="/contact"
                  class="group inline-flex items-center gap-2 text-lg font-medium transition-colors"
                  style="color: var(--color-warm-clay);"
                >
                  <span>Let's Talk</span>
                  <span class="inline-block transition-transform group-hover:translate-x-1" aria-hidden="true">→</span>
                </a>
                <a
                  href="/insights"
                  class="about-cta-secondary inline-flex items-center justify-center px-5 py-2.5 text-base font-regular transition-all rounded"
                >
                  Read My Insights
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .featured-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 640px) {
    .featured-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
    }
  }

  @media (min-width: 1024px) {
    .featured-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .featured-card {
    display: block;
    background: var(--color-white);
    border-radius: 12px;
    overflow: hidden;
    text-decoration: none;
    box-shadow:
      0 1px 3px rgba(18, 64, 69, 0.04),
      0 4px 16px rgba(18, 64, 69, 0.06);
    transition:
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .featured-card:hover {
    transform: translateY(-4px);
    box-shadow:
      0 4px 12px rgba(18, 64, 69, 0.08),
      0 12px 32px rgba(18, 64, 69, 0.1);
  }

  .featured-card .accent-bar {
    height: 4px;
    width: 100%;
  }

  .featured-card .card-body {
    padding: 1.75rem 2rem 2rem;
  }

  .featured-card .card-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-warm-clay);
    transition: gap 0.25s ease;
  }

  .featured-card:hover .card-cta {
    gap: 0.75rem;
  }

  .featured-card .arrow {
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .featured-card:hover .arrow {
    transform: translateX(2px);
  }

  /* Hero CTA hover states */
  .hero-cta-primary:hover {
    color: #C4624A !important;
  }

  .hero-cta-secondary {
    color: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.25);
    background-color: transparent;
  }

  .hero-cta-secondary:hover {
    color: var(--color-white);
    border-color: rgba(255, 255, 255, 0.5);
    background-color: rgba(255, 255, 255, 0.05);
  }

  .about-cta-secondary {
    color: var(--color-forest-green);
    border: 1px solid rgba(18, 64, 69, 0.25);
    background-color: transparent;
  }

  .about-cta-secondary:hover {
    color: var(--color-forest-green);
    border-color: rgba(18, 64, 69, 0.5);
    background-color: rgba(18, 64, 69, 0.05);
  }

  /* Service section styles */
  .service-number {
    font-family: var(--font-primary);
    font-size: 2.5rem;
    font-weight: var(--font-weight-light);
    color: var(--color-warm-clay);
    line-height: 1;
    letter-spacing: -0.02em;
    flex-shrink: 0;
    width: 3rem;
  }

  .service-tag {
    display: inline-block;
    font-family: var(--font-primary);
    font-size: 0.75rem;
    font-weight: var(--font-weight-medium);
    letter-spacing: 0.02em;
    color: var(--color-forest-green);
    background-color: rgba(217, 237, 181, 0.4);
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
  }

  .service-divider {
    height: 1px;
    background-color: var(--color-grey-d);
  }

  /* Client logos grid */
  .client-logos-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem 2.5rem;
    align-items: center;
  }

  @media (min-width: 640px) {
    .client-logos-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2.5rem 3rem;
    }
  }

  @media (min-width: 1024px) {
    .client-logos-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem 3rem;
    }
  }

  .client-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 140px;
    height: 50px;
  }

  @media (min-width: 768px) {
    .client-logo {
      width: 160px;
      height: 55px;
    }
  }

  .client-logo img {
    max-height: 100%;
    max-width: 100%;
    width: 100%;
    height: auto;
    object-fit: contain;
    filter: grayscale(100%);
    opacity: 0.4;
    transition: all 0.3s ease;
  }

  .client-logo:hover img {
    filter: grayscale(0%);
    opacity: 1;
  }
</style>

<script>
  // Hero parallax effect
  const parallaxElements = document.querySelectorAll('.hero-parallax');

  if (parallaxElements.length > 0 && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    let ticking = false;

    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const scrollY = window.scrollY;

          parallaxElements.forEach((el) => {
            const speed = parseFloat(el.dataset.speed) || 0.1;
            const yOffset = scrollY * speed;
            el.style.transform = `translateY(${yOffset}px)`;
          });

          ticking = false;
        });

        ticking = true;
      }
    }, { passive: true });
  }
</script>
